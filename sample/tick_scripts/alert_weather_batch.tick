
var weather = batch
	| query('SELECT mean(temperature) FROM "weather"."default".temperature')
		.period(5m)
		.every(10m)
		.align()
		.fill(0)

// simple case with only one batch query

weather
	 |httpOut('temperature.mean')
	| alert().id('Temperature')
		.message('Temperature alert - batch')
		.warn(lambda: "temperature.mean" > 80)
		.crit(lambda: "temperature.mean" > 100)
		.stateChangesOnly()
    .log('/tmp/temperature_batch.tick.log')
